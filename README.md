# ‚ùù Quote generator



%image%



This app displays a random quote retrieved from the [forismatic API](https://forismatic.com/en/api/) and allows the user to share such quote through twitter or load another one. 

üß∞ This project is built using JavaScript (ES6), CSS, HTML, AJAX requests, third-party API and a loader.



- Built own proxy server 

<br />

---

<br />

## Planning

1. Fetching the data
2. Manipulating DOM
3. Creating a loader



<br />

### 1. Fetching the data 

The base data for making requests to the API is `http://api.forismatic.com/api/1.0/`. We want to use an asynchronous function to fetch the data. 

<br />

**script.js**

```js
// Get quote from API
async function  getQuote() {
  const proxyUrl = 'https://cors-anywhere.herokuapp.com/';
  const apiUrl = 'http://api.forismatic.com/api/1.0/?method=getQuote&lang=en&format=json';
  
  try {
    const response = await fetch(proxyUrl + apiUrl);
    const data = await reponse.json();
    console.log(data));
    
  } catch (error) {
    console.log('No quote', error);
  }
}

// On Load
getQuote();
```

By default, the fetch request uses a CORS policy: by default if you call an API from a different origin (we are at localhost) by default is blocked. This happens a lot with free APIs that are not configured to send CORS headers which would allow it to work. 

To solve the problem of... we call first a Proxy API and then our API.

<br />

### 2. Manipulating DOM

I use an object to store all elements from the DOM that I want to manipulate:

```js
const elements = {
  quoteContainer: document.getElementById('quote-container'),
  quoteText: document.getElementById('quote'),
  authorText: document.getElementById('author'),
  twitterBtn: document.getElementById('twitter'),
  newQuoteBtn: document.getElementById('new-quote'),
};
```

Then I modify the content of the quote text and quote author using `innerText`.

<br />

**Dealing with quotes that are too long**

For any quote that is longer than 120 characters, the font is reduced.

```js
if (data.quoteText.length > 120) {
  elements.quoteText.classList.add('long-quote');
} else {
  elements.quoteText.classList.remove('long-quote');
}
```



<br />

**Assigning 'unknown'  value for the author when there is no author**

```js
if (data.quoteAuthor === '') {
  elements.authorText.innerText = '';
} else {
  elements.authorText.innerText = data.quoteAuthor.
}
```

<br />

**Creating the twitter button**

When clicked, it opens twitter and automatically generates a tweet with the quote and its author ready to be published! üëâüèª Used [Twitter API](https://developer.twitter.com/en/docs/twitter-for-websites/tweet-button/guides/web-intent).

Using the method `window.open(twitterUrl, '_blank')` loads the url that we pass in (in this case the personalised twitter url) into a new or existing browsing context ([ref](https://developer.mozilla.org/en-US/docs/Web/API/Window/open))







<br />

**Creating functionality for the 'new quote' button**

We add an event listener to the button that fires the already defined function `getQuote()`

<br />



### 3. Creating a loader

A new div is added to the html that will serve as the loader. We create a new function `loading()` that targets the loader element:

```js
function loading() {
  elements.loader.hidden = false;
  elements.quoteContainer.hidden = true;
}

function clearLoading() {
  if (!loader.hidden) {
    elements.quoteContainer.hidden = false;
    elements.loader.hidden = true;
  }
}
```

üëâüèª `.hidden` is a property of any HTML element which is `true` if the element is hidden; otherwise `false` ([ref](https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/hidden)).

We implement these two functions in our function `getQuote`





<br />

---

<br />

## Review

This pro



---

Hero pattern generated by [heropatterns.com](https://www.heropatterns.com/)

